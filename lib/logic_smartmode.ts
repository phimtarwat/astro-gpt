// ==========================================================
// ðŸ§© SMART MODE LOGIC (Keyword Routing for Horoscope GPT)
// ==========================================================
// à¸ˆà¸¸à¸”à¸›à¸£à¸°à¸ªà¸‡à¸„à¹Œ: à¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸šà¸›à¸£à¸°à¹€à¸ à¸—à¸„à¸³à¸–à¸²à¸¡à¸‚à¸­à¸‡à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰ (à¸”à¸§à¸‡à¹€à¸”à¸µà¹ˆà¸¢à¸§ / à¸”à¸§à¸‡à¸„à¸¹à¹ˆà¸„à¸§à¸²à¸¡à¸£à¸±à¸ / à¸”à¸§à¸‡à¸„à¸¹à¹ˆà¸à¸²à¸£à¸‡à¸²à¸™ / à¸«à¸¥à¸²à¸¢à¹€à¸ˆà¹‰à¸²à¸Šà¸°à¸•à¸²)
// à¹à¸¥à¹‰à¸§à¹ƒà¸«à¹‰ backend à¸•à¸±à¸”à¸ªà¸´à¸™à¹ƒà¸ˆà¹€à¸£à¸µà¸¢à¸ API à¸—à¸µà¹ˆà¸–à¸¹à¸à¸•à¹‰à¸­à¸‡
// ==========================================================

export type AnalysisMode = "single" | "love" | "business" | "multi";

/**
 * à¸•à¸£à¸§à¸ˆà¸ˆà¸±à¸šà¸›à¸£à¸°à¹€à¸ à¸—à¸„à¸³à¸–à¸²à¸¡à¸ˆà¸²à¸à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸ à¸²à¸©à¸²à¹„à¸—à¸¢ à¹à¸¥à¹‰à¸§à¸à¸³à¸«à¸™à¸”à¹‚à¸«à¸¡à¸”à¸§à¸´à¹€à¸„à¸£à¸²à¸°à¸«à¹Œà¸—à¸µà¹ˆà¹€à¸«à¸¡à¸²à¸°à¸ªà¸¡
 * @param userMessage à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸„à¸³à¸–à¸²à¸¡à¸ˆà¸²à¸à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰
 * @param chartCount à¸ˆà¸³à¸™à¸§à¸™à¹€à¸ˆà¹‰à¸²à¸Šà¸°à¸•à¸²à¸—à¸µà¹ˆà¸£à¸°à¸šà¸¸ (à¸„à¹ˆà¸² default = 1)
 * @returns "single" | "love" | "business" | "multi"
 */
export function detectAnalysisMode(
  userMessage: string,
  chartCount: number = 1
): AnalysisMode {
  const msg = userMessage.trim();

  // ðŸ”¹ à¸–à¹‰à¸²à¸¡à¸µà¸«à¸¥à¸²à¸¢à¹€à¸ˆà¹‰à¸²à¸Šà¸°à¸•à¸² (>2)
  if (chartCount >
